# 将服务由http升级为https

## 必选的执行步骤（以生产环境为例）

1. 注册域名或购买域名

从http升级到https服务，必须要求提供证书。而证书又需要与域名绑定。所以第一步需要先搞定域名。

域名的获取可以通过在域名注册网站上注册，或者从其他人手里购买。

2. 域名备案

目前国内大多数云计算服务商都要求域名必须经过备案且备案成功后，才提供域名解析服务。域名的备案需要通过省级通信管理局审批。

注：本人使用的是阿里云托管的域名及服务器，相关备案也是有阿里云代提交给省通管局。  
备案从提交材料到最终通过审批，如果顺利的话大约需要一周。

3. 申请服务器

生产环境必须使用可通过公网IP访问的服务器。申请云服务器即可。

4. 申请证书

生产环境的证书需要第三方（官方）签发，所以需要申请。证书申请下来后，会提供两个文件：私钥文件和证书文件。

注：私钥文件需要妥善保存，避免丢失和泄露；证书文件需要妥善保存，避免丢失。

5. 域名解析配置

配置域名的解析，将相应的域名指向所申请服务器的公网IP。

6. 防火墙配置

云服务器可能需要配置网络安全组等设置，来开通相应端口号通讯。否则网络防火墙将会阻止对服务器相应端口的访问。

7. 证书配置
修改express的启动文件bin/www，加入证书部分参数的配置，以及将引用模块由http修改为https。